<!DOCTYPE html>
<html lang="en">
  <head>
    <meta charset="UTF-8" />
    <meta name="viewport" content="width=device-width, initial-scale=1.0" />
    <title>My Activities - VolunteerHub</title>
    <link
      href="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/css/bootstrap.min.css"
      rel="stylesheet"
    />
    <link
      rel="stylesheet"
      href="https://cdn.jsdelivr.net/npm/bootstrap-icons@1.10.0/font/bootstrap-icons.css"
    />
    <link rel="stylesheet" href="../css/style.css" />
  </head>
  <body>
    <!-- Navigation will be loaded here by JavaScript -->

    <div class="container mt-5 pt-5">
      <!-- Page Header -->
      <div class="row mb-4">
        <div class="col-12">
          <div class="d-flex justify-content-between align-items-center">
            <div>
              <h1 class="display-6 fw-bold text-primary mb-2">
                <i class="bi bi-clipboard-check me-3"></i>My Volunteer
                Activities
              </h1>
              <p class="text-muted mb-0">
                Track your volunteer journey and manage your applications
              </p>
            </div>
            <div class="d-none d-md-block">
              <button
                class="btn btn-outline-primary me-2"
                onclick="exportActivities()"
              >
                <i class="bi bi-download me-2"></i>Export Data
              </button>
              <a href="opportunities.html" class="btn btn-primary">
                <i class="bi bi-plus-circle me-2"></i>Find More Opportunities
              </a>
            </div>
          </div>
        </div>
      </div>

      <!-- Summary Cards -->
      <div class="row g-4 mb-4">
        <div class="col-md-3">
          <div class="card bg-gradient-primary text-white h-100">
            <div class="card-body text-center">
              <i class="bi bi-hourglass-split display-6 mb-2 opacity-75"></i>
              <h4 id="totalApplications" class="fw-bold mb-1">0</h4>
              <p class="mb-0 small opacity-75">Total Applications</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card bg-gradient-success text-white h-100">
            <div class="card-body text-center">
              <i class="bi bi-check-circle display-6 mb-2 opacity-75"></i>
              <h4 id="completedCount" class="fw-bold mb-1">0</h4>
              <p class="mb-0 small opacity-75">Completed</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card bg-gradient-warning text-white h-100">
            <div class="card-body text-center">
              <i class="bi bi-clock-history display-6 mb-2 opacity-75"></i>
              <h4 id="totalHours" class="fw-bold mb-1">0</h4>
              <p class="mb-0 small opacity-75">Hours Logged</p>
            </div>
          </div>
        </div>
        <div class="col-md-3">
          <div class="card bg-gradient-info text-white h-100">
            <div class="card-body text-center">
              <i class="bi bi-building display-6 mb-2 opacity-75"></i>
              <h4 id="organizationsCount" class="fw-bold mb-1">0</h4>
              <p class="mb-0 small opacity-75">Organizations</p>
            </div>
          </div>
        </div>
      </div>

      <div class="row">
        <div class="col-12">
          <!-- Enhanced Filter Tabs -->
          <div class="card shadow-sm mb-4">
            <div class="card-header bg-white border-bottom-0">
              <ul
                class="nav nav-pills card-header-pills"
                id="activitiesTabs"
                role="tablist"
              >
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link active"
                    id="all-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#all"
                    type="button"
                    role="tab"
                  >
                    <i class="bi bi-list-ul me-2"></i>All Activities
                    <span class="badge bg-secondary ms-2" id="allCount">0</span>
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="pending-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#pending"
                    type="button"
                    role="tab"
                  >
                    <i class="bi bi-hourglass-split me-2"></i>Pending
                    <span
                      class="badge bg-warning text-dark ms-2"
                      id="pendingCount"
                      >0</span
                    >
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="approved-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#approved"
                    type="button"
                    role="tab"
                  >
                    <i class="bi bi-check-circle me-2"></i>Approved
                    <span class="badge bg-info ms-2" id="approvedCount">0</span>
                  </button>
                </li>
                <li class="nav-item" role="presentation">
                  <button
                    class="nav-link"
                    id="completed-tab"
                    data-bs-toggle="pill"
                    data-bs-target="#completed"
                    type="button"
                    role="tab"
                  >
                    <i class="bi bi-trophy me-2"></i>Completed
                    <span class="badge bg-success ms-2" id="completedTabCount"
                      >0</span
                    >
                  </button>
                </li>
              </ul>
            </div>

            <!-- Tab Content -->
            <div class="card-body">
              <div class="tab-content" id="activitiesTabContent">
                <div
                  class="tab-pane fade show active"
                  id="all"
                  role="tabpanel"
                  aria-labelledby="all-tab"
                >
                  <div id="allActivitiesList" class="row g-4">
                    <!-- All activities will be loaded here -->
                    <div class="col-12 text-center py-5">
                      <div class="spinner-border text-primary" role="status">
                        <span class="visually-hidden">Loading...</span>
                      </div>
                      <p class="mt-3 text-muted">Loading your activities...</p>
                    </div>
                  </div>
                </div>
                <div
                  class="tab-pane fade"
                  id="pending"
                  role="tabpanel"
                  aria-labelledby="pending-tab"
                >
                  <div id="pendingActivitiesList" class="row g-4">
                    <!-- Pending activities will be loaded here -->
                  </div>
                </div>
                <div
                  class="tab-pane fade"
                  id="approved"
                  role="tabpanel"
                  aria-labelledby="approved-tab"
                >
                  <div id="approvedActivitiesList" class="row g-4">
                    <!-- Approved activities will be loaded here -->
                  </div>
                </div>
                <div
                  class="tab-pane fade"
                  id="completed"
                  role="tabpanel"
                  aria-labelledby="completed-tab"
                >
                  <div id="completedActivitiesList" class="row g-4">
                    <!-- Completed activities will be loaded here -->
                  </div>
                </div>
              </div>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Enhanced Hours Logging Modal -->
    <div class="modal fade" id="hoursModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header bg-success text-white">
            <h5 class="modal-title">
              <i class="bi bi-clock-history me-2"></i>Log Your Volunteer Hours
            </h5>
            <button
              type="button"
              class="btn-close btn-close-white"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body">
            <div
              class="opportunity-info mb-4 p-3 bg-light rounded"
              id="opportunityInfo"
            >
              <!-- Opportunity details will be loaded here -->
            </div>
            <form id="hoursForm">
              <div class="row">
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="hoursWorked" class="form-label fw-semibold"
                      >Hours Worked *</label
                    >
                    <div class="input-group">
                      <span class="input-group-text">
                        <i class="bi bi-clock"></i>
                      </span>
                      <input
                        type="number"
                        class="form-control"
                        id="hoursWorked"
                        min="0.5"
                        max="24"
                        step="0.5"
                        placeholder="e.g., 4.5"
                        required
                      />
                      <span class="input-group-text">hours</span>
                    </div>
                    <div class="form-text">
                      Minimum 0.5 hours, maximum 24 hours
                    </div>
                  </div>
                </div>
                <div class="col-md-6">
                  <div class="mb-3">
                    <label for="volunteerDate" class="form-label fw-semibold"
                      >Date of Service</label
                    >
                    <div class="input-group">
                      <span class="input-group-text">
                        <i class="bi bi-calendar3"></i>
                      </span>
                      <input
                        type="date"
                        class="form-control"
                        id="volunteerDate"
                      />
                    </div>
                  </div>
                </div>
              </div>

              <div class="mb-3">
                <label for="workDescription" class="form-label fw-semibold"
                  >What did you accomplish? *</label
                >
                <textarea
                  class="form-control"
                  id="workDescription"
                  rows="4"
                  placeholder="Describe the work you completed, tasks performed, or impact made..."
                  required
                ></textarea>
                <div class="form-text">
                  Share details about your volunteer work to help track impact
                </div>
              </div>

              <div class="mb-3">
                <label for="skillsUsed" class="form-label fw-semibold"
                  >Skills Used</label
                >
                <input
                  type="text"
                  class="form-control"
                  id="skillsUsed"
                  placeholder="e.g., Teaching, Communication, Problem Solving"
                />
                <div class="form-text">
                  List any skills you utilized during this volunteer work
                </div>
              </div>

              <div class="mb-3">
                <label for="experienceRating" class="form-label fw-semibold"
                  >Rate Your Experience</label
                >
                <select class="form-select" id="experienceRating">
                  <option value="">Select rating...</option>
                  <option value="5">⭐⭐⭐⭐⭐ Excellent</option>
                  <option value="4">⭐⭐⭐⭐ Good</option>
                  <option value="3">⭐⭐⭐ Average</option>
                  <option value="2">⭐⭐ Below Average</option>
                  <option value="1">⭐ Poor</option>
                </select>
              </div>

              <input type="hidden" id="applicationId" />
            </form>
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-outline-secondary"
              data-bs-dismiss="modal"
            >
              <i class="bi bi-x me-2"></i>Cancel
            </button>
            <button
              type="button"
              class="btn btn-success"
              onclick="submitHours()"
            >
              <i class="bi bi-check-lg me-2"></i>Log Hours & Complete
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Activity Details Modal -->
    <div class="modal fade" id="activityDetailsModal" tabindex="-1">
      <div class="modal-dialog modal-lg">
        <div class="modal-content">
          <div class="modal-header">
            <h5 class="modal-title" id="activityModalTitle">
              Activity Details
            </h5>
            <button
              type="button"
              class="btn-close"
              data-bs-dismiss="modal"
            ></button>
          </div>
          <div class="modal-body" id="activityModalBody">
            <!-- Activity details will be loaded here -->
          </div>
          <div class="modal-footer">
            <button
              type="button"
              class="btn btn-secondary"
              data-bs-dismiss="modal"
            >
              Close
            </button>
          </div>
        </div>
      </div>
    </div>

    <!-- Success Modal -->
    <div class="modal fade" id="successModal" tabindex="-1">
      <div class="modal-dialog modal-dialog-centered">
        <div class="modal-content text-center">
          <div class="modal-body p-4">
            <i class="bi bi-check-circle-fill text-success display-4 mb-3"></i>
            <h5 class="fw-bold mb-3">Hours Logged Successfully!</h5>
            <p class="text-muted mb-4">
              Your volunteer hours have been recorded and the activity has been
              marked as completed.
            </p>
            <div class="d-flex gap-2 justify-content-center">
              <button
                type="button"
                class="btn btn-primary"
                data-bs-dismiss="modal"
                onclick="navigateTo('impact')"
              >
                <i class="bi bi-bar-chart me-2"></i>View Impact Report
              </button>
              <button
                type="button"
                class="btn btn-outline-secondary"
                data-bs-dismiss="modal"
              >
                Continue
              </button>
            </div>
          </div>
        </div>
      </div>
    </div>

    <!-- Footer will be loaded here by JavaScript -->

    <script src="https://cdn.jsdelivr.net/npm/bootstrap@5.3.0/dist/js/bootstrap.bundle.min.js"></script>
    <script type="module" src="../js/navigation.js"></script>
    <script type="module" src="../js/my-activities.js"></script>

    <script>
      // Export activities function
      function exportActivities() {
        // This would export user's activities to CSV/PDF
        alert(
          "Export feature coming soon! This will allow you to download your volunteer activity report."
        );
      }

      // Set today's date as default for volunteer date
      document.addEventListener("DOMContentLoaded", function () {
        const today = new Date().toISOString().split("T")[0];
        document.getElementById("volunteerDate").value = today;
      });
    </script>
  </body>
</html>
