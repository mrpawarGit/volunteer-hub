<!-- Navigation -->
<nav class="navbar navbar-expand-lg navbar-dark bg-primary fixed-top shadow">
  <div class="container">
    <a class="navbar-brand fw-bold" href="#" onclick="navigateToHome()">
      <i class="bi bi-heart-fill me-2"></i>VolunteerHub
    </a>
    <button
      class="navbar-toggler border-0"
      type="button"
      data-bs-toggle="collapse"
      data-bs-target="#navbarNav"
      aria-controls="navbarNav"
      aria-expanded="false"
      aria-label="Toggle navigation"
    >
      <span class="navbar-toggler-icon"></span>
    </button>
    <div class="collapse navbar-collapse" id="navbarNav">
      <ul class="navbar-nav me-auto">
        <li class="nav-item">
          <a
            class="nav-link px-3"
            href="#"
            onclick="navigateTo('dashboard')"
            id="nav-dashboard"
          >
            <i class="bi bi-speedometer2 me-2"></i>Dashboard
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link px-3"
            href="#"
            onclick="navigateTo('opportunities')"
            id="nav-opportunities"
          >
            <i class="bi bi-search me-2"></i>Find Opportunities
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link px-3"
            href="#"
            onclick="navigateTo('my-activities')"
            id="nav-activities"
          >
            <i class="bi bi-clipboard-check me-2"></i>My Activities
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link px-3"
            href="#"
            onclick="navigateTo('groups')"
            id="nav-groups"
          >
            <i class="bi bi-people me-2"></i>Groups
          </a>
        </li>
        <li class="nav-item">
          <a
            class="nav-link px-3"
            href="#"
            onclick="navigateTo('calendar')"
            id="nav-calendar"
          >
            <i class="bi bi-calendar3 me-2"></i>Calendar
          </a>
        </li>
      </ul>
      <ul class="navbar-nav">
        Notification Bell (when logged in)
        <li class="nav-item" id="notificationBell" style="display: none">
          <a
            class="nav-link position-relative"
            href="#"
            onclick="toggleNotifications()"
          >
            <i class="bi bi-bell fs-5"></i>
            <span
              class="position-absolute top-0 start-100 translate-middle badge rounded-pill bg-danger"
              id="notificationCount"
              style="display: none"
            >
              0
            </span>
          </a>
        </li>

        <!-- Authenticated User Menu -->
        <li class="nav-item dropdown" id="userDropdown" style="display: none">
          <a
            class="nav-link dropdown-toggle d-flex align-items-center"
            href="#"
            role="button"
            data-bs-toggle="dropdown"
            aria-expanded="false"
          >
            <div class="user-avatar me-2">
              <i class="bi bi-person-circle fs-4"></i>
            </div>
            <span id="userName" class="d-none d-lg-inline">User</span>
          </a>
          <ul class="dropdown-menu dropdown-menu-end shadow border-0">
            <li>
              <div class="dropdown-item-text">
                <div class="d-flex align-items-center">
                  <i class="bi bi-person-circle fs-3 me-3"></i>
                  <div>
                    <div class="fw-semibold" id="userNameFull">User Name</div>
                    <div class="small text-muted" id="userEmail">
                      user@example.com
                    </div>
                  </div>
                </div>
              </div>
            </li>
            <li><hr class="dropdown-divider my-2" /></li>
            <li>
              <a
                class="dropdown-item py-2"
                href="#"
                onclick="navigateTo('profile')"
              >
                <i class="bi bi-person me-2"></i>My Profile
              </a>
            </li>
            <li>
              <a
                class="dropdown-item py-2"
                href="#"
                onclick="navigateTo('impact')"
              >
                <i class="bi bi-bar-chart me-2"></i>Impact Report
              </a>
            </li>
            <li>
              <a
                class="dropdown-item py-2"
                href="#"
                onclick="navigateTo('messages')"
              >
                <i class="bi bi-chat-dots me-2"></i>Messages
                <span
                  class="badge bg-primary rounded-pill ms-auto"
                  id="messageCount"
                  style="display: none"
                  >0</span
                >
              </a>
            </li>
            <li>
              <a
                class="dropdown-item py-2"
                href="#"
                onclick="navigateTo('settings')"
              >
                <i class="bi bi-gear me-2"></i>Settings
              </a>
            </li>
            <li><hr class="dropdown-divider my-2" /></li>
            <li>
              <a
                class="dropdown-item py-2 text-danger"
                href="#"
                onclick="handleLogout()"
              >
                <i class="bi bi-box-arrow-right me-2"></i>Logout
              </a>
            </li>
          </ul>
        </li>

        <!-- Guest User Buttons -->
        <li class="nav-item" id="authButtons">
          <div class="d-flex gap-2">
            <a
              class="btn btn-outline-light btn-sm"
              href="#"
              onclick="navigateTo('login')"
            >
              <i class="bi bi-box-arrow-in-right me-1"></i>Login
            </a>
            <a
              class="btn btn-light btn-sm"
              href="#"
              onclick="navigateTo('register')"
            >
              <i class="bi bi-person-plus me-1"></i>Register
            </a>
          </div>
        </li>
      </ul>
    </div>
  </div>
</nav>

<!-- Notification Dropdown (Hidden by default) -->
<div
  class="notification-dropdown"
  id="notificationDropdown"
  style="display: none"
>
  <div
    class="card shadow border-0 position-fixed"
    style="
      top: 70px;
      right: 20px;
      width: 300px;
      max-height: 400px;
      z-index: 1060;
    "
  >
    <div
      class="card-header bg-primary text-white d-flex justify-content-between align-items-center"
    >
      <h6 class="mb-0">Notifications</h6>
      <button class="btn btn-sm btn-outline-light" onclick="markAllAsRead()">
        <i class="bi bi-check2-all"></i>
      </button>
    </div>
    <div
      class="card-body p-0"
      style="max-height: 300px; overflow-y: auto"
      id="notificationList"
    >
      <div class="text-center py-4 text-muted">
        <i class="bi bi-bell-slash fs-1"></i>
        <p class="mt-2">No notifications</p>
      </div>
    </div>
    <div class="card-footer text-center">
      <a
        href="#"
        onclick="navigateTo('notifications')"
        class="btn btn-sm btn-outline-primary"
        >View All</a
      >
    </div>
  </div>
</div>
